
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Wrap Those Web Sockets - The Blog from Darel</title>
  <meta name="author" content="Darel Finkbeiner">

  
  <meta name="description" content="Here’s the situation: You have a websocket-friendly routing infrastructure that
only has a single port available on each machine. (at least that you &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://darelf.github.io/blog/2014/03/04/wrap-those-web-sockets">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="The Blog from Darel" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-48691206-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">The Blog from Darel</a></h1>
  
    <h2>A blog about stuff... and things</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:darelf.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://darelf.github.io/blog/2014/03/04/wrap-those-web-sockets/" data-via="darelf" data-counturl="http://darelf.github.io/blog/2014/03/04/wrap-those-web-sockets/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
  
  <header>
    
      <h1 class="entry-title">Wrap Those Web Sockets</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-04T10:59:10-05:00" pubdate data-updated="true">Mar 4<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Here’s the situation: You have a websocket-friendly routing infrastructure that
only has a single port available on each machine. (at least that you can use) But
you have some awesome client-server stuff that runs completely in the background
and is not really related to browsers or anything. You currently, and brilliantly,
have them speaking over regular node streams using the <code>net</code> functionality.</p>

<p>What to do?
<!--more-->
The routing structure only routes http requests. You can’t just redirect regular
socket connections.</p>

<p>WEBSOCKETS TO THE RESCUE!  Websockets are just sockets, but they are negotiated
over http. Oh yeah they are. So they can be routed by your infrastructure that
supports websockets. (like, say, <a href="http://github.com/substack/bouncy">bouncy</a>, but
there are plenty of other examples).</p>

<p>But you aren’t using a browser. There’s no browser here. Hmm.</p>

<p>You go check out <code>npm</code> and find out that maxogden has already solved your problem.
That’s what you do. He has already wrapped websockets with stream functionality in
a project he calls <a href="http://github.com/maxogden/websocket-stream">websocket-stream</a></p>

<p>Now your carefully designed code that leverages the node stream api can continue
on untouched simply by wrapping the websockets with this little gem.</p>

<p>Enjoy!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Darel Finkbeiner</span></span>

      








  


<time datetime="2014-03-04T10:59:10-05:00" pubdate data-updated="true">Mar 4<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/http/'>http</a>, <a class='category' href='/blog/categories/nodejs/'>nodejs</a>, <a class='category' href='/blog/categories/programming/'>programming</a>, <a class='category' href='/blog/categories/websockets/'>websockets</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://darelf.github.io/blog/2014/03/04/wrap-those-web-sockets/" data-via="darelf" data-counturl="http://darelf.github.io/blog/2014/03/04/wrap-those-web-sockets/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/03/03/lazarus-new-beginnings/" title="Previous Post: Lazarus - New Beginnings">&laquo; Lazarus - New Beginnings</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/03/10/lazarus-business/" title="Next Post: Lazarus - Business">Lazarus - Business &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/05/08/bouncing-and-routing/">Bouncing and Routing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/22/using-npm-like-a-boss/">Using NPM Like a Boss</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/14/lazarus-yo-ho/">Lazarus - Yo Ho</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/09/evented/">Evented</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/07/lazarus-tactics/">Lazarus - Tactics</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/i-o/'>I/O <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/asynchronous/'>asynchronous <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/blog/'>blog <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/browserify/'>browserify <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/complexity/'>complexity <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/creative/'>creative <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/culture/'>culture <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/data/'>data <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/events/'>events <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/http/'>http <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/lazarus/'>lazarus <span class='badge'>6</span></a></li>
<li class='category'><a href='/blog/categories/modules/'>modules <span class='badge'>2</span></a></li>
<li class='category'><a href='/blog/categories/network/'>network <span class='badge'>2</span></a></li>
<li class='category'><a href='/blog/categories/node/'>node <span class='badge'>2</span></a></li>
<li class='category'><a href='/blog/categories/nodejs/'>nodejs <span class='badge'>5</span></a></li>
<li class='category'><a href='/blog/categories/npm/'>npm <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/pathfinder/'>pathfinder <span class='badge'>7</span></a></li>
<li class='category'><a href='/blog/categories/philosophy/'>philosophy <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/pirates/'>pirates <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/programming/'>programming <span class='badge'>12</span></a></li>
<li class='category'><a href='/blog/categories/proxy/'>proxy <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/queue/'>queue <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/router/'>router <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/rpg/'>rpg <span class='badge'>2</span></a></li>
<li class='category'><a href='/blog/categories/storytelling/'>storytelling <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/streams/'>streams <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/sync/'>sync <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/synchronization/'>synchronization <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/tips/'>tips <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/versioning/'>versioning <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/war/'>war <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/websockets/'>websockets <span class='badge'>1</span></a></li>
<li class='category'><a href='/blog/categories/writing/'>writing <span class='badge'>1</span></a></li>

  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Darel Finkbeiner -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
